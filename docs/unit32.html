<!DOCTYPE html>
<html lang="en"><head>
<script src="unit32_files/libs/clipboard/clipboard.min.js"></script>
<script src="unit32_files/libs/quarto-html/tabby.min.js"></script>
<script src="unit32_files/libs/quarto-html/popper.min.js"></script>
<script src="unit32_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="unit32_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="unit32_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="unit32_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="unit32_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <meta name="author" content="Carlos Viñals (carlos.vinals@cunef.edu)">
  <title>Data Wrangling: Organizing Data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="unit32_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="unit32_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="unit32_files/libs/revealjs/dist/theme/quarto.css">
  <link href="unit32_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="unit32_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="unit32_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="unit32_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Wrangling: Organizing Data</h1>
  <p class="subtitle">Data Analysis &amp; Information Extraction</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Carlos Viñals (carlos.vinals@cunef.edu) 
</div>
</div>
</div>

</section>
<section id="unit-overview" class="slide level2">
<h2>Unit overview</h2>
<div style="font-size: 30px;">
<p><strong>Content</strong></p>
</div>
<div style="font-size: 30px;">
<ul>
<li>Organize Data: Pivoting</li>
<li>Arranging columns</li>
<li>Relational Data</li>
<li>Set operations</li>
</ul>
</div>
<div style="font-size: 30px;">
<p><br></p>
<p><strong>References</strong></p>
<p>This unit is mostly based on <em><a href="https://r4ds.had.co.nz">R for Data Science</a>, Wickham and Grolemund (2016)</em></p>
</div>
</section>
<section id="data-wrangling" class="slide level2">
<h2>Data Wrangling</h2>
<p><strong>Objective</strong>: Make data ready for their future <strong>exploration</strong> and <strong>modelling</strong></p>
<p>We need to convert <strong>raw data</strong> into <strong>processed data</strong></p>
<div class="quarto-layout-panel" style="font-size:30px;" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Raw Data</strong></p>
<ul>
<li>Data as it appears on the source origin.</li>
<li>Any manipulation has been done to them.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Processed Data</strong></p>
<ul>
<li>Each variable in a column.</li>
<li>Each observation in a raw.</li>
<li>Each observational unit is a cell.</li>
<li>More complex data, interconnected tables.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="data-wrangling-1" class="slide level2">
<h2>Data Wrangling</h2>
<ol type="1">
<li>Importing the data</li>
<li>Organizing the data</li>
<li>Transforming the data</li>
</ol>

<img data-src="img/data-science-wrangle.png" class="r-stretch"></section>
<section id="section" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Requisites: <em>tidyverse</em></p>
</div>
<h3 id="the-tidyverse-ecosystem-for-data-analysis">The <em>tidyverse</em> ecosystem for data analysis</h3>

<img data-src="img/tidyverse_ecosystem.png" style="margin-left: 50px;" class="r-stretch"></section>
<section id="section-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Organizing Data</p>
</div>
</section>
<section id="section-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="organizing-data">Organizing Data</h3>
<p>We will learn how to organize data in R. Mainly focused on <strong>tabular</strong> data.</p>
<p>As we have seen we will continue using the <strong>tidyverse</strong> ecosystem, in this case we will introduce <code>tidyr</code> a package designed for organizing data structure as desired.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb1-1" class="hljs-ln-code"><a href=""></a><span class="fu">library</span>(tidyverse) <span class="co"># Use library(tidyr) for this package only</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mutliple-structures-for-the-same-data" class="slide level2">
<h2>Mutliple structures for the same data</h2>
<div style="font-size:30px;">
<p>The same data can be represented in different ways. Here are 4 ways of representing information regarding: <em>country, year, population, cases</em></p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>1 Table with all in columns</strong></p>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>1 Table with duplicates per concept</strong></p>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mutliple-structures-for-the-same-data-1" class="slide level2">
<h2>Mutliple structures for the same data</h2>
<div style="font-size:30px;">
<p>The same data can be represented in different ways. Here are 4 ways of representing information regarding: <em>country, year, population, cases</em></p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>1 Table with a combined column</strong></p>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>2 Tables for each concept</strong></p>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country         `1999`     `2000`
  &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan   19987071   20595360
2 Brazil       172006362  174504898
3 China       1272915272 1280428583</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mutliple-structures-for-the-same-data-2" class="slide level2">
<h2>Mutliple structures for the same data</h2>
<p>From the last example only one is fully organized as desired following conventions.</p>
<p>An organized data set will be the one that:</p>
<ul>
<li>Each variable belongs to one single column</li>
<li>Each row is an observation</li>
<li>Each cell has a single value.</li>
</ul>
<p>Following this definition, the first example is the organized one.</p>
</section>
<section id="section-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Pivoting data</p>
</div>
</section>
<section id="section-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="pivoting-data">Pivoting Data</h3>
<p>Normally, the data we receive is not properly organized. So the first, step is to identify the variables and observations.</p>
<p>Once identified, we will need to solve one of these problems:</p>
<ul>
<li>A variable is disperse in several columns.</li>
<li>An observation is disperse in multiple rows.</li>
</ul>
<p>This can be resolved using <code>pivot_longer()</code> or <code>pivot_wider()</code></p>
</section>
<section id="pivot_longer" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<p>The same variable is organized in different columns:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<div style="font-size:30px;">
<p>We will need to <strong>pivot</strong> this columns a new pair of variables. We need to know:</p>
<ul>
<li>The columns to pivot.</li>
<li>The name of the variable that will receive the column names. <code>year</code> in this case.</li>
<li>The name of the variable that will receive the values. <code>cases</code> in this case.</li>
</ul>
</div>
</section>
<section id="pivot_longer-1" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a>table4a <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb8-3"><a href=""></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="co"># columns to pivot</span></span>
<span id="cb8-4"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="co"># variable to host colnames</span></span>
<span id="cb8-5"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"cases"</span> <span class="co"># variable to host values</span></span>
<span id="cb8-6"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
<div style="font-size:30px;">
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Take into account we use (`) symbol in the name of the columns because they have a number as name.</p>
</div>
</div>
</div>
</div>
</section>
<section id="pivot_wider" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<p>The same observation is organized in several rows. In this example each observation shows each country each year. You see each observation takes two rows…</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</section>
<section id="pivot_wider-1" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<p>We will need to organize the data showing only one row per observation. For doing that we need…</p>
<ul>
<li><p>The column where we will extract the names for the new variables. <code>type</code> in this case.</p></li>
<li><p>The column where we will extract the valus for each variable. <code>count</code> in this case.</p></li>
</ul>
</section>
<section id="pivot_wider-2" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>table2 <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href=""></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb11-3"><a href=""></a>    <span class="at">names_from =</span> type, <span class="co"># origin column with variables</span></span>
<span id="cb11-4"><a href=""></a>    <span class="at">values_from =</span> count <span class="co"># origin column with values</span></span>
<span id="cb11-5"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Pivoting Data</p>
</div>
<h3 id="to-sum-up">To Sum Up</h3>
<ul>
<li><p><code>pivot_longer()</code> will eliminate columns and create rows, makes data more large.</p></li>
<li><p><code>pivot_wider()</code> will eliminate rows and create columns, makes data more wide.</p></li>
</ul>
</section>
<section id="section-6" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Arranging Columns</p>
</div>
</section>
<section id="separate-and-concat-columns" class="slide level2">
<h2>Separate and concat columns</h2>
<p>We can found situations when a column contains information related to two or more variables.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p>We can use <code>separate()</code> to divide one column in two.</p>
</section>
<section id="separate-and-concat-columns-1" class="slide level2">
<h2>Separate and concat columns</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href=""></a>  <span class="fu">separate</span>(rate, </span>
<span id="cb14-3"><a href=""></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  population
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</section>
<section id="separate-and-concat-columns-2" class="slide level2">
<h2>Separate and concat columns</h2>
<div style="font-size:30px;">
<p>By default it makes the separation when finds a non-alphanumeric value. But you can specify the character to use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href=""></a>  <span class="fu">separate</span>(rate, </span>
<span id="cb16-3"><a href=""></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>),</span>
<span id="cb16-4"><a href=""></a>           <span class="at">sep =</span> <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  population
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>You can do it with integer values too as position to make separation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>table5x <span class="ot">&lt;-</span> table3 <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href=""></a>  <span class="fu">separate</span>(year, </span>
<span id="cb18-3"><a href=""></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"century"</span>, <span class="st">"year"</span>),</span>
<span id="cb18-4"><a href=""></a>           <span class="at">sep =</span> <span class="dv">2</span> <span class="co"># make separation after 2 characters</span></span>
<span id="cb18-5"><a href=""></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="separate-and-concat-columns-3" class="slide level2">
<h2>Separate and concat columns</h2>
<p>It is convenient to convert the value, otherwise the new columns will be Strings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href=""></a>  <span class="fu">separate</span>(rate, </span>
<span id="cb19-3"><a href=""></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>),</span>
<span id="cb19-4"><a href=""></a>           <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</section>
<section id="separate-and-concat-columns-4" class="slide level2">
<h2>Separate and concat columns</h2>
<p>For concatenate columns we can use <code>unite()</code>. It has as arguments the new variable, columns and separator to use.</p>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a><span class="co"># Separated century and year</span></span>
<span id="cb21-2"><a href=""></a>table5x <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href=""></a>  <span class="fu">select</span>(country, </span>
<span id="cb21-4"><a href=""></a>         century, year)</span>
<span id="cb21-5"><a href=""></a>table5x <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href=""></a>  <span class="fu">unite</span>(full_year, </span>
<span id="cb21-7"><a href=""></a>        century, year, </span>
<span id="cb21-8"><a href=""></a>        <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     century year 
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;
1 Afghanistan 19      99   
2 Afghanistan 20      00   
3 Brazil      19      99   
4 Brazil      20      00   
5 China       19      99   
6 China       20      00   </code></pre>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  country     full_year
  &lt;chr&gt;       &lt;chr&gt;    
1 Afghanistan 1999     
2 Afghanistan 2000     
3 Brazil      1999     
4 Brazil      2000     
5 China       1999     
6 China       2000     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-7" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Relational Data</p>
</div>
</section>
<section id="relational-data" class="slide level2">
<h2>Relational Data</h2>
<p>When working with data we will normally need more than one database, different tables. This makes more richer the analysis, as we cross different sources of data to increase the information available.</p>
<p>We need to know how to join different data tables. When the data is distributed in different tables we speak about <strong>relational data</strong>.</p>
</section>
<section id="relational-data-1" class="slide level2">
<h2>Relational Data</h2>
<p>Inside <strong>tidyr</strong> we can find the following type of joins…</p>
<ul>
<li><p><strong>Mutating Joins</strong> Designed to join data from another table.</p></li>
<li><p><strong>Filtering Joins</strong> Designed to filter data using the another table data as reference if they match or not rows.</p></li>
<li><p><strong>Set operations</strong> Use observations from different tables to make full set comparisons.</p></li>
</ul>
</section>
<section id="section-8" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 40px;">
<p>Relational Data</p>
</div>
<div style="position: absolute; padding-top: 1px; font-size: 100px;">
<p>Databases Concepts</p>
</div>
</section>
<section id="our-database-nycflights13" class="slide level2">
<h2>Our Database: <em>nycflights13</em></h2>
<p>For the full explanation we will use the following database:</p>
<ul>
<li><strong>airlines</strong>, names of different airlines.</li>
<li><strong>airports</strong>, information of each airport.</li>
<li><strong>planes</strong>, information of each plane.</li>
<li><strong>weather</strong>, weather information of each airport of NYC in every hour.</li>
<li><strong>flights</strong>, information about each flight that depart from NYC in 2013</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="fu">library</span>(nycflights13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="our-database-nycflights13-1" class="slide level2">
<h2>Our Database: <em>nycflights13</em></h2>

<img data-src="img/nycflights13_design.png" class="r-stretch"></section>
<section id="section-9" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Database concepts</p>
</div>
<h3 id="keys">Keys</h3>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Variables</strong> used for connecting within different tables. They make helpful identifying observations inside the tables and make then differentiate from other observations.</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="img/nycflights13_design.png"></p>
</div>
</div>
</div>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Database concepts</p>
</div>
<h3 id="type-of-keys">Type of Keys</h3>
<div class="columns" style="font-size:30px">
<p>Two kind of keys:</p><div class="column" style="width:45%;">
<ul>
<li><p><strong>Primary Key</strong> Used for identifying an observation from the rest in a table.</p></li>
<li><p><strong>Foreign Key</strong> Used for identifying an observation in another table in relation with other table.</p></li>
</ul>
<p>A Foreign key should be associated to a Primary key from another table.</p>
</div><div class="column">
<p><img data-src="img/nycflights13_keys.png" width="5000"></p>
</div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Database concepts</p>
</div>
<h3 id="type-of-keys-1">Type of Keys</h3>
<div style="font-size:30px">
<p>Once detected the keys, is easy to check if we have identify them correctly.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>planes <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href=""></a>  <span class="fu">count</span>(tailnum) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href=""></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# ℹ 2 variables: tailnum &lt;chr&gt;, n &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>weather <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href=""></a>  <span class="fu">count</span>(year, month, day, hour, origin) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href=""></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
   year month   day  hour origin     n
  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
1  2013    11     3     1 EWR        2
2  2013    11     3     1 JFK        2
3  2013    11     3     1 LGA        2</code></pre>
</div>
</div>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Database concepts</p>
</div>
<h3 id="create-your-own-key">Create your own key…</h3>
<div style="font-size:30px">
<p>It is possible to find tables without a clear defined key or any combination of fields that allow us using them as keys (weather of flights tables are examples of that)</p>
<p>In these cases we can easily create our own key using row indexes.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>flights_key <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">key =</span> <span class="fu">row_number</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a>flights_key <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href=""></a>  <span class="fu">count</span>(key) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href=""></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# ℹ 2 variables: key &lt;int&gt;, n &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Database concepts</p>
</div>
<h3 id="relationships-between-tables">Relationships between tables</h3>
<div class="columns" style="font-size:30px">
<div class="column" style="width:45%;">
<p>Between a <em>primary key</em> and a <em>foreign key</em>, tables form <strong>relationships</strong>.</p>
<p>Generally, relationships will be one to many… e.g.&nbsp;<em>each flight has only one plane, but a single plane can do multiple flights</em></p>
<p>But we can also find situations where one to one or many to many relationships are being used.</p>
</div><div class="column">
<p><img data-src="img/nycflights13_relations.png" width="5000"></p>
</div>
</div>
</section>
<section id="section-14" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 40px;">
<p>Relational Data</p>
</div>
<div style="position: absolute; padding-top: 1px; font-size: 100px;">
<p>Mutating Joins</p>
</div>
</section>
<section id="mutating-joins" class="slide level2">
<h2>Mutating Joins</h2>
<p>We use them to combine variables between two tables.</p>
<p>First it will pair the observations of both tables using the corresponding keys, then it will add the the different variables from one table to another.</p>
</section>
<section id="mutating-joins-1" class="slide level2">
<h2>Mutating Joins</h2>
<div class="columns">
<div class="column" style="font-size:30px;">
<p>For understanding the different join concepts we will work with this synthetic data example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-2"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb32-3"><a href=""></a>  <span class="at">val_x =</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>)</span>
<span id="cb32-4"><a href=""></a>)</span>
<span id="cb32-5"><a href=""></a></span>
<span id="cb32-6"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-7"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>),</span>
<span id="cb32-8"><a href=""></a>  <span class="at">val_y =</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>)</span>
<span id="cb32-9"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="img/join-setup.png" style="margin-left:20px; margin-top:100px;"></p>
</div>
</div>
</section>
<section id="section-15" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Joins</p>
</div>
<h3 id="inner-join">Inner Join</h3>
<div style="font-size:30px">
<p>Inner join will pair those observations that match between both tables. Otherwise they won’t be joined and won’t appear on the result table.</p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/inner.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href=""></a>  <span class="fu">inner_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-16" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Joins</p>
</div>
<h3 id="outer-joins">Outer joins</h3>
<p>Outer joins are designed to conserve observations that appear <strong>at least</strong> in one of the data sets (tables).</p>
<ul>
<li><strong>Left join</strong>. Conserve all observations from <strong>x</strong></li>
<li><strong>Right join</strong>. Conserve all observations from <strong>y</strong></li>
<li><strong>Full join</strong>. Conserve all observations from <strong>x</strong> and <strong>y</strong></li>
</ul>
</section>
<section id="section-17" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Outer Joins</p>
</div>
<h3 id="left-join">Left Join</h3>
<div style="font-size:30px">
<p>Left join will return all observations from the left table (<strong>x</strong>) and those from right table (<strong>y</strong>) matching an observation from x. Observations from <strong>x</strong> without match will have filled as <code>NA</code> the variables from <strong>y</strong></p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/left.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href=""></a>  <span class="fu">left_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-18" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Outer Joins</p>
</div>
<h3 id="right-join">Right Join</h3>
<div style="font-size:30px">
<p>Right join will return all observations from the right table (<strong>y</strong>) and those from left table (<strong>x</strong>) matching an observation from y. Observations from <strong>y</strong> without match will have filled as <code>NA</code> the variables from <strong>x</strong></p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/right.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href=""></a>  <span class="fu">right_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-19" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Outer Joins</p>
</div>
<h3 id="full-join">Full Join</h3>
<div style="font-size:30px">
<p>Full join will return all observations from the left table (<strong>x</strong>) and from right table (<strong>y</strong>). Observations from <strong>x</strong> or <strong>y</strong> without match in the other table will have the variables from the other table filled as <code>NA</code>.</p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/full.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href=""></a>  <span class="fu">full_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; 
4     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-20" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Joins</p>
</div>
<h3 id="duplicated-values">Duplicated Values</h3>
<p>Duplicated values may occur when where joining tables that have another type of relationships different to <strong>one-to-one</strong>, in these cases we can found…</p>
<ul>
<li><p><strong>one-to-many</strong> relationships, where in one table we can found duplicated keys.</p></li>
<li><p><strong>many-to-many</strong> relationships, where in both tables we can found duplicated keys.</p></li>
</ul>
</section>
<section id="section-21" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating joins</p>
</div>
<h3 id="duplicated-values-one-to-many">Duplicated Values: One-to-many</h3>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/join-one-to-many.png"></p>
</div><div class="column" style="font-size:30px;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb41-2"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>),</span>
<span id="cb41-3"><a href=""></a>  <span class="at">val_x =</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>, <span class="st">"x4"</span>)</span>
<span id="cb41-4"><a href=""></a>)</span>
<span id="cb41-5"><a href=""></a></span>
<span id="cb41-6"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb41-7"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb41-8"><a href=""></a>  <span class="at">val_y =</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>)</span>
<span id="cb41-9"><a href=""></a>)</span>
<span id="cb41-10"><a href=""></a></span>
<span id="cb41-11"><a href=""></a><span class="fu">left_join</span>(x, y, <span class="at">by =</span><span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     2 x3    y2   
4     1 x4    y1   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-22" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating joins</p>
</div>
<h3 id="duplicated-values-many-to-many">Duplicated Values: Many-to-many</h3>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/join-many-to-many.png"></p>
<div style="font-size:20px">
<p>A warning message is returned by the function…</p>
<pre><code>Warning in left_join(x, y, by = "key"): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 2 of `x` matches multiple rows in `y`.
ℹ Row 2 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
</div><div class="column" style="font-size:30px;">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb44-2"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb44-3"><a href=""></a>  <span class="at">val_x =</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>, <span class="st">"x4"</span>)</span>
<span id="cb44-4"><a href=""></a>)</span>
<span id="cb44-5"><a href=""></a></span>
<span id="cb44-6"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb44-7"><a href=""></a>  <span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb44-8"><a href=""></a>  <span class="at">val_y =</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span>)</span>
<span id="cb44-9"><a href=""></a>)</span>
<span id="cb44-10"><a href=""></a></span>
<span id="cb44-11"><a href=""></a><span class="fu">left_join</span>(x, y, <span class="at">by =</span><span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     2 x2    y3   
4     2 x3    y2   
5     2 x3    y3   
6     3 x4    y4   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="lets-practice" class="slide level2">
<h2>Let’s practice!</h2>
<h3 id="exercise-3.2.1">Exercise 3.2.1</h3>
<p>Using the data from <strong>flights</strong> and <strong>airlines</strong> tables, create a new database (data frame) with information regarding year, month, day and time (hour) for every flight and include the variable <strong>carrier</strong> that contains the letter code of each airline and <strong>name</strong> variable that contains the full name of the airline.</p>
</section>
<section id="the-by-parameter" class="slide level2">
<h2>The <code>by</code> parameter</h2>
<p>As we have seen <code>by</code> parameter in join functions help us identifying the key to use for joining data.</p>
<h3 id="case-1.-default-value">Case 1. Default value</h3>
<div style="font-size:30px">
<p>If we don’t tell the function a variable to use, it will have its default value… <code>by = NULL</code>. In this case it will use all the variables that appear in both tables as key.</p>
<p><em>What will happen in this example?</em></p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href=""></a>  <span class="fu">left_join</span>(weather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-by-parameter-1" class="slide level2">
<h2>The <code>by</code> parameter</h2>
<h3 id="case-2.-common-variables">Case 2. Common variable(s)</h3>
<div style="font-size:30px">
<p>As we have seen, we can tell the function the common variable to use as key… <code>by = "x"</code>. Is important to remark the the variable name is common in both tables.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href=""></a>  <span class="fu">left_join</span>(planes, <span class="at">by =</span> <span class="st">"tailnum"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size:30px">
<p>In case we need to use more than one variable as key we can tell the function using a vector… <code>by = c("x", "y")</code>. It will join using both variables.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href=""></a>  <span class="fu">left_join</span>(planes, </span>
<span id="cb48-3"><a href=""></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"hour"</span>, <span class="st">"origin"</span>)</span>
<span id="cb48-4"><a href=""></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-by-parameter-2" class="slide level2">
<h2>The <code>by</code> parameter</h2>
<h3 id="case-3.-different-variables">Case 3. Different variable(s)</h3>
<div style="font-size:30px">
<p>In this case both tables have a variable in common but named differently… <code>by = c("a" = "b")</code>, this way the join will use key <strong>a</strong> of the right table with key <strong>b</strong> of the left table to make the matching.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href=""></a>  <span class="fu">left_join</span>(airports, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"dest"</span> <span class="ot">=</span> <span class="st">"faa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lets-practice-1" class="slide level2">
<h2>Let’s practice!</h2>
<h3 id="exercise-3.2.2">Exercise 3.2.2</h3>
<p>¿Which variables you will use as key for joining data from <strong>planes</strong> and <strong>flights</strong> tables.</p>
<h3 id="exercise-3.2.3">Exercise 3.2.3</h3>
<p>¿Which are the full name of the destination airports with the highest average delay? You must show a table with two columns, one with the airport name and other with the average delay.</p>
</section>
<section id="section-23" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Mutating Joins</p>
</div>
<h3 id="to-sum-up-1">To Sum Up</h3>
<div style="font-size:30px">
<p>Designed for joining data and incorporate more variables.</p>
<ul>
<li><p><strong>inner_join</strong> will join only observations existing in both tables.</p></li>
<li><p><strong>left_join</strong> or <strong>right_join</strong> will join all observations of at one table (left/right) and the observations matching and the other one. <code>NA</code> values may appear for unmatched observations.</p></li>
<li><p><strong>full_join</strong> will join all observations. <code>NA</code> values may appear for unmatched observations.</p></li>
</ul>
</div>
<div class="callout callout-tip callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Most recommended join</strong></p>
</div>
<div class="callout-content">
<p>Generally, it is highly recommendable to use <strong>left_join</strong> among rest of join functions when possible.</p>
</div>
</div>
</div>
</section>
<section id="section-24" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 40px;">
<p>Relational Data</p>
</div>
<div style="position: absolute; padding-top: 1px; font-size: 100px;">
<p>Filtering Joins</p>
</div>
</section>
<section id="filtering-joins" class="slide level2">
<h2>Filtering Joins</h2>
<p>As mutating joins allow us to include new variables and more information to our data set, filtering joins help us filtering observations in our data set following the observations existing in another table. We can find two kinds of filtering joins…</p>
<ul>
<li><strong>semi_join</strong></li>
<li><strong>anti_join</strong></li>
</ul>
</section>
<section id="section-25" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Filtering Joins</p>
</div>
<h3 id="semi-join">Semi Join</h3>
<div style="font-size:30px">
<p>Semi join (<code>semi_join(x, y)</code>) will maintain all observations existing on <strong>x</strong> table that <strong>have a match</strong> in <strong>y</strong> table.</p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/semi.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href=""></a>  <span class="fu">semi_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
    key val_x
  &lt;dbl&gt; &lt;chr&gt;
1     1 x1   
2     2 x2   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-26" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Filtering Joins</p>
</div>
<h3 id="anti-join">Anti Join</h3>
<div style="font-size:30px">
<p>Anti join (<code>anti_join(x, y)</code>) will maintain all observations existing on <strong>x</strong> table that <strong>don’t have a match</strong> in <strong>y</strong> table.</p>
</div>
<div class="columns">
<div class="column">
<p><img data-src="img/anti.png"></p>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href=""></a>  <span class="fu">anti_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
    key val_x
  &lt;dbl&gt; &lt;chr&gt;
1     3 x3   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="lets-practice-2" class="slide level2">
<h2>Let’s practice!</h2>
<h3 id="exercise-3.2.4">Exercise 3.2.4</h3>
<p>Extract all the information from the flights which destination is in the top 10 destinations. (destinations with more observations)</p>
<h3 id="exercise-3.2.5">Exercise 3.2.5</h3>
<p>Check if there is any discrepancy in the data. Look for flights with a plane that is not registered in the planes database.</p>
</section>
<section id="section-27" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Set Operations</p>
</div>
</section>
<section id="set-operations" class="slide level2">
<h2>Set Operations</h2>
<p>This functions are used to work with two tables. They expect both tables have the <strong>same</strong> variables, as they will play with them as sets, comparing all variables for each observation…</p>
<div style="font-size:30px">
<ul>
<li><p><code>intersect(x, y)</code> it returns the observations that exist in both tables.</p></li>
<li><p><code>union(x, y)</code> it returns all unique observations existing in both tables. There is a <code>union_all(x, y)</code> that will show all (in case of similar in both tables they will appear repeated)</p></li>
<li><p><code>setdiff(x, y)</code> it returns the observations existing in <strong>x</strong> but not in <strong>y</strong></p></li>
</ul>
</div>
</section>
<section id="set-operations-1" class="slide level2">
<h2>Set operations</h2>
<p>Using the following data…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a>df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb54-2"><a href=""></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a><span class="fu">intersect</span>(df1, df2)</span>
<span id="cb55-2"><a href=""></a><span class="fu">union</span>(df1, df2)</span>
<span id="cb55-3"><a href=""></a><span class="fu">setdiff</span>(df1, df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="column quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
      x     y
  &lt;dbl&gt; &lt;dbl&gt;
1     1     1</code></pre>
</div>
</div>
</div>
<div class="column quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
      x     y
  &lt;dbl&gt; &lt;dbl&gt;
1     1     1
2     2     1
3     1     2</code></pre>
</div>
</div>
</div>
<div class="column quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
      x     y
  &lt;dbl&gt; &lt;dbl&gt;
1     2     1</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-28" class="slide level2">
<h2></h2>
<p><img data-src="img/final.gif" width="1000"></p>
<div class="quarto-auto-generated-content">
<p><img src="img/logo2.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Organizing Data</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="unit32_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="unit32_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="unit32_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="unit32_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>