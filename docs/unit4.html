<!DOCTYPE html>
<html lang="en"><head>
<script src="unit4_files/libs/clipboard/clipboard.min.js"></script>
<script src="unit4_files/libs/quarto-html/tabby.min.js"></script>
<script src="unit4_files/libs/quarto-html/popper.min.js"></script>
<script src="unit4_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="unit4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="unit4_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="unit4_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="unit4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content="Carlos Viñals Guitart">
  <title>Modelling</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="unit4_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="unit4_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="unit4_files/libs/revealjs/dist/theme/quarto.css">
  <link href="unit4_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="unit4_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="unit4_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="unit4_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="unit4_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="unit4_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="unit4_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="unit4_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
  <script type="ojs-define">
  {"contents":[{"name":"boot_plot","value":{"boot_mean":[128.94,115.64,130.38,130.48,134.18,133.88,143.02,131.22,141.74,122.82,130.2,132.06,149.86,154.66,142.56,136.72,140.74,127.66,140.36,138.16,148.92,125.48,138.18,127.12,147.24,132.04,148.84,126.18,132.8,145.9,150.94,153.84,150.28,151.18,147.28,140.72,137.2,138.28,129.26,133.16,128.52,154.62,132.5,146.24,138.5,130.38,128.34,127.26,150.02,123.02,127.28,128.06,130.68,128.1,146.12,120.9,137.08,138.92,137.04,153.62,126.24,137.54,120.74,119.02,133.56,134.08,125.34,132.42,143.26,140.92,144.76,129.64,137.84,140.52,124.44,140.44,146.18,141.98,143.66,135.32,141.42,147.52,157.08,131.72,137.48,153.42,122.46,126.04,138.78,121.56,147.32,138.3,153.2,131.64,134.84,128.6,139.6,154.26,137.72,113.44,150.18,166.24,137.74,126.08,125.02,139.18,137.26,159.3,141.04,138.16,156.74,134.16,157.42,119.64,153.62,156,127.78,121.48,128.94,147.34,150.84,142.14,141.78,124.96,143.78,132.76,150.02,140.62,147.84,135.94,142.06,133.4,121.96,148.32,127.92,119.52,141.56,146.86,144.88,150.94,135.06,132.3,126.7,121.56,123.86,126.74,137.4,143.64,128.2,128.18,161.18,163.06,137.4,125.86,130.08,138.42,150.58,145.94,112.94,143.86,156.3,133,141.22,118.6,128.08,149.06,139.2,139.34,149.58,148.66,133.18,138.14,131.1,138.96,143.62,136.78,127.32,134.86,137.08,143.04,143.12,142.8,139.62,130.1,136.2,129.42,127.9,143.42,124.5,142.74,130.28,141.86,127.04,126.86,143.4,137.02,126.84,133.98,140.6,132.72,142.74,115.36,130.14,149.26,124,144.5,132.5,135.12,138.56,145.54,132.54,130.58,125.16,124.04,137.92,123.7,132.96,146.82,140.3,137.38,148.04,142.18,142.62,130,140.36,152.28,117.74,123.06,136.2,113.82,118.18,131.66,138.4,124.96,146.18,136.06,114.28,153.06,157.82,127.8,129.18,137.98,133.1,127.64,141.9,143.7,139.2,157.5,140.3,132.7,152.02,137.18,143.64,135.24,138.7,152.9,135.1,146.3,137.56,154.84,142.36,150.8,147,137.36,149.64,144.1,145.22,158.12,143.36,124.86,150.24,132.78,155.82,148.38,138.22,147.14,137.78,126.96,127.84,134.12,144.58,162.1,132.26,128.7,128.02,143.78,141.3,136.38,148.46,151.3,141.24,128.36,142.48,120.7,132.94,145.7,128.82,131.64,138.36,122.34,161.82,126.26,150.62,137.16,138.38,128.3,151.42,140.98,125.66,126.62,132.28,157.74,140.64,138.3,138.22,148.38,125.16,137.38,134.54,120.78,162.34,130.04,129.02,154.42,168.48,127.86,128.92,144.78,138.24,128.78,133.74,130.06,144.94,138.22,146.32,134.64,143.1,139.34,137.28,111.34,136.42,136.14,141.74,138.78,122.68,126.52,140.64,146.24,138.36,128.62,141.7,156.22,135.58,147.58,132.1,133.78,134.18,155.92,151.34,114.44,118.66,148.6,152.5,148.38,120.88,124.86,124.8,121.1,134.42,136.46,135.7,151.34,135.96,134.4,135.26,143.66,132.78,146.94,132.08,137.28,162.76,145.76,156.54,147.26,146.58,135.06,161.14,105.96,124.92,138.32,143.58,153.94,129.44,135.78,162.6,127.68,146.64,125.36,168.2,158.36,171.78,119.64,139.1,133.14,154.82,138.96,135.54,141.16,141.22,140.1,157.26,155.66,131.92,132.02,133.52,132.22,125.64,148.58,153.74,121.2,136.88,166.5,147.42,143.66,136.16,127.04,125.62,149.64,133.72,125,127.6,140.94,143.54,142.94,157.32,141.8,139.02,131.04,138.78,145.34,148.28,120.26,158.62,139.92,132.16,148.6,128.48,144.8,133.34,122.58,119.14,138.52,151.36,135.82,115.46,133.82,166.4,144.42,131.58,141.12,148.74,141.42,141.84,127.5,131.68,123.24,141.72,129.92,161.84,121.76,138.42,159.56,136.96,147.26,141.32,125.42,144.6,148.76,124.26,126.02,166.52,137.6,143.88,138.38,132.76,160.74,130.48,137.1,145.78,147.58,139.2,131.9,135.8,134.46,138.18,141.64,127.96,157.52,128.7,159.9]}}]}
  </script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Modelling</h1>
  <p class="subtitle">Data Analysis &amp; Information Extraction</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Carlos Viñals Guitart 
</div>
</div>
</div>

</section>
<section id="unit-overview" class="slide level2">
<h2>Unit overview</h2>
<div style="font-size: 30px;">
<p><strong>Content</strong></p>
</div>
<div style="font-size: 30px;">
<ul>
<li>Concepts of modelling</li>
<li>Fitting models</li>
<li>Linear Regression</li>
<li>Visualizing Models</li>
<li>Understanding Linear Models</li>
<li>Categorical Linear Models</li>
<li>Multiple Linear Models</li>
<li>Inference</li>
<li>Estimate</li>
<li>Confidence Intervals</li>
<li>Bootstrapping</li>
</ul>
</div>
<div style="font-size: 30px;">
<p><br></p>
<p><strong>References</strong></p>
<p>This unit is mostly based on <em><a href="https://r4ds.had.co.nz">R for Data Science</a>, Wickham and Grolemund (2016)</em></p>
</div>
</section>
<section id="data-modelling" class="slide level2">
<h2>Data Modelling</h2>
<div style="font-size:30px">
<p>Models are mathematical tools that can describe a system and capture relationships in the data given to them. They can be used for several purposes…</p>
<ul>
<li><p><strong>Explore</strong> the data, detect patterns not easy to detect with visualization and simple analysis.</p></li>
<li><p><strong>Generalize</strong> discoveries in a sample (inference)</p></li>
<li><p><strong>Find relations between data</strong>, effects between variables.</p></li>
</ul>
<p>Models are the result of a prior analysis and data transformation. But there are also a way for enrich our analysis and improve data treatment, as they will simplify mathematically the relations and insights of the existing data.</p>
</div>
</section>
<section id="before-continuing" class="slide level2">
<h2><em>Before continuing…</em></h2>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Disclaimer: This is not a machine learning course!</strong></p>
</div>
<div class="callout-content">
<p>In this course we will do a basic approach to modelling as part of the data analysis process, providing a basic understanding of modelling and how to do a simple data exploration with them.</p>
<p>We won’t cover topics related with generalizing results or find effectiveness between variables (causal analysis).</p>
<p>As this is not a machine learning course we will see the basic concepts of modelling but not see them in practice. Just understand how models are build and used inside an exploration work.</p>
<p>Normally modelling is taught inside machine learning, prediction and classification environments.</p>
</div>
</div>
</div>
</section>
<section id="data-modelling-1" class="slide level2">
<h2>Data Modelling</h2>
<div style="font-size:30px">
<p>The different patters discovered by modelling tools can be…</p>
<ul>
<li><p>Association patterns</p></li>
<li><p>Cause-Effect relations</p></li>
</ul>
<p>But, these patterns can occur…</p>
<ul>
<li><p>Only on the observed data</p></li>
<li><p>Generalize to the whole population.</p></li>
</ul>
</div>
</section>
<section id="data-modelling-studies" class="slide level2">
<h2>Data Modelling: Studies</h2>
<div style="font-size:30px">
<p>The way data is collected and treated, will affect how we can generalize the data to the population…</p>
<ul>
<li>If we want to generalize the results we will need to use <strong>random sampling</strong>.</li>
</ul>
<p>And that’s not enough sometimes, specially when we speak about scientific studies…</p>
<ul>
<li>Use <strong>random assignment</strong>. Establish different treatments as a way to avoid <strong>confusion variables</strong>.</li>
</ul>
<p><em>Confusion Variable: An external variable that can generate the effect on both variables, making a false conclusion of being related.</em></p>
</div>
</section>
<section id="data-modelling-studies-1" class="slide level2">
<h2>Data Modelling: Studies</h2>
<div class="columns">
<div class="column" style="font-size:30px">
<p>We can see two different studies…</p>
<ul>
<li><p>Based on <strong>observation</strong>. Collect data without any alteration on their generation. Allow us to see <strong>relation</strong>.</p></li>
<li><p>Based on <strong>experimentation</strong>. Applying different treatments to the observations. Allow us to see <strong>effect and cause</strong>.</p></li>
</ul>
</div><div class="column">
<p><img data-src="img/scientific_sampling.PNG"></p>
</div></div>
</section>
<section id="data-modelling-2" class="slide level2">
<h2>Data Modelling</h2>
<div style="font-size:30px">
<p>Modelling involves different tasks followed by an exploratory data analysis.</p>
<p>This analysis will help us identify the correct model and understand the data for better model improvements.</p>
<p>A modelling project involves different steps, such as EDA, feature engineering (choosing variables), initial modelling, evaluation of models, model engineering and final models implementation.</p>
<p>As we have seen, we will focus in this course to use them for exploration.</p>
</div>

<img data-src="img/data-science-model.png" style="margin-left:160px" class="r-stretch"></section>
<section id="section" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Basic concepts of models</p>
</div>
</section>
<section id="what-are-models" class="slide level2">
<h2>What are models?</h2>
<div style="font-size:30px">
<p>As we have seen in the introduction models are tools that help us find patterns in the data.</p>
<p>We will study models that relate a group of variables (prediction variables) with a variable we are interested in (answer variable)</p>
<p>Models will represent these relations with <strong>functions</strong>. This functions will map a series of inputs to an output, we can express the function as:</p>
</div>
<p><span class="math display">\[
y = 3x + 7
\]</span></p>
<div style="font-size:30px">
<p><em>Where <span class="math inline">\(x\)</span> is the input and <span class="math inline">\(y\)</span> the output.</em></p>
</div>
</section>
<section id="what-are-models-1" class="slide level2">
<h2>What are models?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href=""></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb1-3"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1-4"><a href=""></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1-5"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>, <span class="at">se=</span><span class="cn">FALSE</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-2-1.png" width="960" class="r-stretch"></section>
<section id="family-of-models-and-models" class="slide level2">
<h2>Family of models and models</h2>
<div style="font-size:30px">
<p>Two different things…</p>
<ul>
<li><strong>Family of models</strong> General designed models that define a pattern we want to capture. E.g. the family of linear models that relate <span class="math inline">\(x\)</span> with <span class="math inline">\(y\)</span> is…</li>
</ul>
<p><span class="math display">\[
y = \beta_0 + \beta_1x
\]</span></p>
<ul>
<li><strong>Fitted model</strong> the model inside the family that betters reproduce and captures the existing relation within the data.</li>
</ul>
<p>Remember models are simplifications of reality, but do not necessary express the reality. They help us summary the patterns and reproduce them.</p>
</div>
</section>
<section id="some-key-concepts" class="slide level2">
<h2>Some Key Concepts</h2>
<div style="font-size:30px">
<ul>
<li><p><strong>Response variable</strong>: Variable we want to analyze and understand, the behavior and variation. It is also known as dependable variable. Normally we will drawn this variable in y axis.</p></li>
<li><p><strong>Explainable variables</strong>: Variables we want to use to explain the response variable behavior. Also known as independent variables, co-variables, predictors or <em>features</em>. We will normally drawn them on the x axis.</p></li>
<li><p><strong>Predicted variable</strong>: the output of our model for certain value of the explainable variables.</p></li>
</ul>
</div>
</section>
<section id="section-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Fitting models</p>
</div>
</section>
<section id="fitting-models" class="slide level2">
<h2>Fitting models</h2>
<p>Look at the following data… do you see any pattern? detect the variables?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span> </span>
<span id="cb2-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="fitting-models-1" class="slide level2">
<h2>Fitting models</h2>
<ul>
<li><p>The data shows a clear pattern.</p></li>
<li><p>We will use a model to try to capture the pattern.</p></li>
<li><p>A linear model seems reasonable: <span class="math inline">\(y = \beta_0 + \beta_1x\)</span></p></li>
<li><p>But linear models is a big family of models, infinite models can exist.</p></li>
</ul>
</section>
<section id="fitting-models-2" class="slide level2">
<h2>Fitting models</h2>
<div class="columns" style="font-size:30px">
<div class="column">
<p>All possible models, or at least some of them…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>models <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb3-2"><a href=""></a><span class="at">a1 =</span> <span class="fu">runif</span>(<span class="dv">250</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">40</span>),</span>
<span id="cb3-3"><a href=""></a><span class="at">a2 =</span> <span class="fu">runif</span>(<span class="dv">250</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>)</span>
<span id="cb3-4"><a href=""></a>)</span>
<span id="cb3-5"><a href=""></a></span>
<span id="cb3-6"><a href=""></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb3-7"><a href=""></a>  <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> a1, </span>
<span id="cb3-8"><a href=""></a>                  <span class="at">slope =</span> a2), </span>
<span id="cb3-9"><a href=""></a>              <span class="at">data =</span> models, <span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb3-10"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="unit4_files/figure-revealjs/unnamed-chunk-5-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><p><br></p><ul>
<li><p>As you can see these models are <strong>bad</strong>, didn’t capture the pattern.</p></li>
<li><p>We will need to determine which models are <strong>more close</strong> to the data.</p></li>
</ul>
</div>
</section>
<section id="fitting-models-3" class="slide level2">
<h2>Fitting models</h2>
<div style="font-size:30px">
<p>One common approximation is to find the model that minimizes the sum of all vertical distances to each point of the straight line of the model.</p>
</div>

<img data-src="img/model_resiudals.png" class="r-stretch"><p>This is what we know as Linear Regression.</p>
</section>
<section id="section-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Linear Regression</p>
</div>
</section>
<section id="linear-regression" class="slide level2">
<h2>Linear Regression</h2>
<p>As we have seen we have used Linear Regression to create a simple model. For obtaining the coefficients of the model formula we do as follows…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>reg_mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span>
<span id="cb4-2"><a href=""></a></span>
<span id="cb4-3"><a href=""></a><span class="fu">coef</span>(reg_mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)          wt 
  37.285126   -5.344472 </code></pre>
</div>
</div>
<ul>
<li><p>The first part of the function <code>mpg ~ wt</code> is the formula. Equivalent too <span class="math inline">\(mpg = \beta_0 + \beta_1 \cdot wt\)</span></p></li>
<li><p><code>coef</code> function will return the values of both coefficients of the formula. <em>Intercept</em> is equal to <span class="math inline">\(\beta_0\)</span> while the second number of equal to <span class="math inline">\(\beta_1\)</span></p></li>
</ul>
</section>
<section id="linear-regression-1" class="slide level2">
<h2>Linear Regression</h2>
<p>Linear Regression is an statistical model that explains the linear relation between a predictor <span class="math inline">\(x\)</span> and one quantitative variable <span class="math inline">\(y\)</span> with a certain error <span class="math inline">\(\epsilon\)</span></p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x + \epsilon
\]</span></p>
<p>Take into account we won’t analyze and see the error <span class="math inline">\(\epsilon\)</span> in this course, but it always exists and is important to analyze it.</p>
</section>
<section id="linear-regression-2" class="slide level2">
<h2>Linear Regression</h2>
<ul>
<li><p>For estimating the values of <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> we use the available data.</p></li>
<li><p>The estimations found for each coefficient are the ones that minimize the vertical distance between the values and the model line.</p></li>
<li><p>Each estimation will be known as <span class="math inline">\(b_0\)</span> and <span class="math inline">\(b_1\)</span>, making the function <span class="math inline">\(\dot y = b_0 + b_1x\)</span> being <span class="math inline">\(\dot y\)</span> the predicted value</p></li>
</ul>
</section>
<section id="model-residuals" class="slide level2">
<h2>Model Residuals</h2>
<p>Residuals tell us how much far of the real value the predicted one is.</p>
<p><span class="math display">\[
Residual = RealValue - PredictedValue = y - \dot y
\]</span> As the linear regression model is the one that minimizes the sum of vertical distances, is the same as telling the one that minimizes the residual sum of squares.</p>
<p><span class="math display">\[
\sum_{i=1}^n[y_i - \dot y_i]^2 = \sum_{i=1}^n[y_i - (\beta_0 + \beta_1x)]^2
\]</span></p>
</section>
<section id="section-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Visualizing Models</p>
</div>
</section>
<section id="visualizing-models" class="slide level2">
<h2>Visualizing Models</h2>
<p>When speaking about visualization about our models…</p>
<ul>
<li>The predictions of our models.</li>
<li>The residuals of our models.</li>
</ul>
<p>For doing this we will use <code>modelr</code> from <code>tidyverse</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="fu">library</span>(modelr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizing-models-1" class="slide level2">
<h2>Visualizing Models</h2>
<p>First we are going to create a grid of dots of the predicted variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="fu">library</span>(modelr)</span>
<span id="cb7-2"><a href=""></a></span>
<span id="cb7-3"><a href=""></a>grid <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href=""></a>  <span class="fu">data_grid</span>(wt)</span>
<span id="cb7-5"><a href=""></a></span>
<span id="cb7-6"><a href=""></a><span class="fu">head</span>(grid,<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
     wt
  &lt;dbl&gt;
1  1.51
2  1.62
3  1.84
4  1.94
5  2.14
6  2.2 </code></pre>
</div>
</div>
</section>
<section id="visualizing-models-2" class="slide level2">
<h2>Visualizing Models</h2>
<p>We can add some predictions…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="co"># Create the model</span></span>
<span id="cb9-2"><a href=""></a>reg_mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span>
<span id="cb9-3"><a href=""></a></span>
<span id="cb9-4"><a href=""></a><span class="co"># Add the predictions</span></span>
<span id="cb9-5"><a href=""></a>grid <span class="ot">&lt;-</span> grid <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href=""></a>  <span class="fu">add_predictions</span>(reg_mod)</span>
<span id="cb9-7"><a href=""></a></span>
<span id="cb9-8"><a href=""></a><span class="fu">head</span>(grid,<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
     wt  pred
  &lt;dbl&gt; &lt;dbl&gt;
1  1.51  29.2
2  1.62  28.7
3  1.84  27.5
4  1.94  26.9
5  2.14  25.8
6  2.2   25.5</code></pre>
</div>
</div>
</section>
<section id="visualizing-models-3" class="slide level2">
<h2>Visualizing Models</h2>
<p>A now we can visualize the model…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt)) <span class="sc">+</span></span>
<span id="cb11-2"><a href=""></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> mpg)) <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-3"><a href=""></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> pred), <span class="at">data =</span> grid, <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="visualizing-models-4" class="slide level2">
<h2>Visualizing Models</h2>
<p>We can now add the residuals….</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href=""></a>  <span class="fu">add_residuals</span>(reg_mod)</span>
<span id="cb12-3"><a href=""></a></span>
<span id="cb12-4"><a href=""></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, resid)) <span class="sc">+</span></span>
<span id="cb12-5"><a href=""></a>  <span class="fu">geom_ref_line</span>(<span class="at">h =</span> <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-11-1.png" width="960" class="r-stretch"></section>
<section id="visualizing-models-5" class="slide level2">
<h2>Visualizing Models</h2>
<ul>
<li><p>With the <strong>predictions</strong> we can find which pattern we have been able to capture.</p></li>
<li><p>With the <strong>residuals</strong> we can know which pattern has not been captured.</p></li>
</ul>
</section>
<section id="section-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Using and understanding our models</p>
</div>
</section>
<section id="what-to-do-with-our-models" class="slide level2">
<h2>What to do with our models?</h2>
<ul>
<li><p><strong>Explain</strong>: explain the relation between <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span> with the parameters <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span></p></li>
<li><p><strong>Prediction</strong>: for a new value of <span class="math inline">\(x\)</span> and obtain the equivalent value <span class="math inline">\(y\)</span></p></li>
</ul>
</section>
<section id="interpreting-linear-regression" class="slide level2">
<h2>Interpreting linear regression</h2>
<p>Using the last created model, we can use now <code>broom</code> library from tidyverse ecosystem, that offers multiple functions to optimize a create more efficient code and tasks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">library</span>(broom)</span>
<span id="cb13-2"><a href=""></a></span>
<span id="cb13-3"><a href=""></a>mod_reg <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span>
<span id="cb13-4"><a href=""></a><span class="fu">tidy</span>(mod_reg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    37.3      1.88      19.9  8.24e-19
2 wt             -5.34     0.559     -9.56 1.29e-10</code></pre>
</div>
</div>
</section>
<section id="linear-regression-intercept" class="slide level2">
<h2>Linear Regression: Intercept</h2>
<p>Our linear regression model is…</p>
<p><span class="math display">\[
\dot{mpg} = \beta_0 + \beta_1wt
\]</span> <span class="math inline">\(\beta_0\)</span> is the base value in a case of a zero value for <span class="math inline">\(wt\)</span>. This will be the predicted value in this case.</p>
<p>Eg. 0 as wt…</p>
<p><span class="math display">\[
\dot{mpg} = \beta_0 + \beta_1 * 0 = \beta_0
\]</span></p>
</section>
<section id="linear-regression-slope" class="slide level2">
<h2>Linear Regression: Slope</h2>
<p>Our linear regression model is…</p>
<p><span class="math display">\[
\dot{mpg} = \beta_0 + \beta_1wt
\]</span></p>
<p><span class="math inline">\(\beta_1\)</span> is the increase we can expect for change in the explainable variable <span class="math inline">\(wt\)</span></p>
<p>Eg. what happens if we increase 1 wt…</p>
<p><span class="math display">\[
\beta_0 + \beta_1(wt + 1) =
\beta_0 + \beta_1wt + \beta_1 =
\dot{mpg} + \beta_1
\]</span></p>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="experience-and-salary">Experience and Salary</h3>
<p>We will see this example where we will try to model the years of experience to the salary of a teacher</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="fu">library</span>(openintro)</span>
<span id="cb15-2"><a href=""></a></span>
<span id="cb15-3"><a href=""></a>grade <span class="ot">&lt;-</span> <span class="fu">sample</span>(</span>
<span id="cb15-4"><a href=""></a>  <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"elementary"</span>, <span class="dv">20</span>), </span>
<span id="cb15-5"><a href=""></a>    <span class="fu">rep</span>(<span class="st">"middle"</span>, <span class="dv">25</span>),</span>
<span id="cb15-6"><a href=""></a>    <span class="fu">rep</span>(<span class="st">"high"</span>, <span class="dv">26</span>))</span>
<span id="cb15-7"><a href=""></a>)</span>
<span id="cb15-8"><a href=""></a></span>
<span id="cb15-9"><a href=""></a>teacher_sample <span class="ot">&lt;-</span> teacher <span class="sc">%&gt;%</span> </span>
<span id="cb15-10"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">degree =</span> <span class="fu">factor</span>(degree, <span class="fu">c</span>(<span class="st">"MA"</span>, <span class="st">"BA"</span>)),</span>
<span id="cb15-11"><a href=""></a>         <span class="at">grade =</span> grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="experience-and-salary-1">Experience and Salary</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">ggplot</span>(teacher_sample, </span>
<span id="cb16-2"><a href=""></a>       <span class="fu">aes</span>(<span class="at">x=</span>years, <span class="at">y=</span>base)) <span class="sc">+</span></span>
<span id="cb16-3"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch"></section>
<section id="section-7" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="experience-and-salary-do-it">Experience and Salary: Do it!</h3>
<p><strong>Part 1.</strong> Fit a linear model, find the coefficients of the formula and interpret them.</p>
<p><strong>Part 2.</strong> Make a prediction for the salary of teacher with 15 years of experience in the field.</p>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="experience-and-salary-2">Experience and Salary</h3>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-15-1.png" width="960" class="r-stretch"></section>
<section id="section-9" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Linear Regression with Categorical data</p>
</div>
</section>
<section id="linear-regression-categorical" class="slide level2">
<h2>Linear Regression: Categorical</h2>
<p>We have started assuming <span class="math inline">\(x\)</span> as a continuous value, but we can find situations where it is categorical.</p>
<p>In this case our normal formula <span class="math inline">\(y = \beta_0 + \beta_1x\)</span> won’t fit the scenario as x is not a number. For example if x was a genre: male or female.</p>
<p>What we can do is to create a new variable that has a value of 0 and 1 depending if one category is selected. Let’s see it with an example.</p>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-salary">Degree and Salary</h3>
<p>We will analyze the salary depending on the grade…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a><span class="co"># Fiting the model</span></span>
<span id="cb17-2"><a href=""></a>mod_base_degree <span class="ot">&lt;-</span> <span class="fu">lm</span>(base <span class="sc">~</span> degree, <span class="at">data=</span>teacher_sample)</span>
<span id="cb17-3"><a href=""></a><span class="fu">tidy</span>(mod_base_degree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   56610.     1777.    31.8   5.44e-43
2 degreeBA       -352.     2398.    -0.147 8.84e- 1</code></pre>
</div>
</div>
<div style="font-size:30px">
<p>R has created a <strong>indicator variable</strong> degreeBA; if the grade is BA takes value 1 otherwise 0.</p>
<p>In case of more than two variables it will create two or more indicator variables.</p>
<p>Base level is the one that will be assumed by the variable when the rest are 0. We must interpret coefficients respect base level.</p>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-salary-1">Degree and Salary</h3>
<p>So how we can interpret each coefficient…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="co"># Fiting the model</span></span>
<span id="cb19-2"><a href=""></a>mod_base_degree <span class="ot">&lt;-</span> <span class="fu">lm</span>(base <span class="sc">~</span> degree, <span class="at">data=</span>teacher_sample)</span>
<span id="cb19-3"><a href=""></a><span class="fu">tidy</span>(mod_base_degree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   56610.     1777.    31.8   5.44e-43
2 degreeBA       -352.     2398.    -0.147 8.84e- 1</code></pre>
</div>
</div>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-salary-2">Degree and Salary</h3>
<p>Now we can add the predictions…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>mod_base_degree <span class="ot">&lt;-</span> <span class="fu">lm</span>(base <span class="sc">~</span> degree, <span class="at">data=</span>teacher_sample)</span>
<span id="cb21-2"><a href=""></a></span>
<span id="cb21-3"><a href=""></a>grid <span class="ot">&lt;-</span> teacher_sample <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href=""></a>  <span class="fu">data_grid</span>(degree) <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href=""></a>  <span class="fu">add_predictions</span>(mod_base_degree)</span>
<span id="cb21-6"><a href=""></a></span>
<span id="cb21-7"><a href=""></a>grid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  degree   pred
  &lt;fct&gt;   &lt;dbl&gt;
1 MA     56610.
2 BA     56257.</code></pre>
</div>
</div>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-salary-3">Degree and Salary</h3>
<p>Visualizing the predictions… what we have predict… average</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="fu">ggplot</span>(teacher_sample, <span class="fu">aes</span>(<span class="at">x=</span>degree)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>base)) <span class="sc">+</span></span>
<span id="cb23-2"><a href=""></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> grid, <span class="fu">aes</span>(<span class="at">y =</span> pred), <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-19-1.png" width="960" class="r-stretch"></section>
<section id="section-14" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Multiple Linear Regression</p>
</div>
</section>
<section id="multiple-linear-regression" class="slide level2">
<h2>Multiple Linear Regression</h2>
<p>It is frequent to find scenarios where multiple predictor variables are found. The simplest linear model we can use is the <strong>multiple linear regression</strong></p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x_1 + \beta_2x_2 +  \cdot\cdot\cdot + \beta_nx_n  
\]</span></p>
<p>The effect of each variable can be analyzed independently of the rest of variables.</p>
</section>
<section id="section-15" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-experience-affects-salary">Degree and Experience affects Salary</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>mod_reg <span class="ot">&lt;-</span> <span class="fu">lm</span>(base <span class="sc">~</span> years <span class="sc">+</span> degree, <span class="at">data =</span> teacher_sample)</span>
<span id="cb24-2"><a href=""></a></span>
<span id="cb24-3"><a href=""></a><span class="fu">tidy</span>(mod_reg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   44838.    1156.      38.8  4.11e-48
2 years           818.      54.0     15.2  1.75e-23
3 degreeBA      -2560.    1164.      -2.20 3.12e- 2</code></pre>
</div>
</div>
</section>
<section id="section-16" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-experience-affects-salary-1">Degree and Experience affects Salary</h3>
<p>Add the predictions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>grid <span class="ot">&lt;-</span> teacher_sample <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href=""></a>  <span class="fu">data_grid</span>(years, degree) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href=""></a>  <span class="fu">add_predictions</span>(mod_reg)</span>
<span id="cb26-4"><a href=""></a></span>
<span id="cb26-5"><a href=""></a>grid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76 × 3
   years degree   pred
   &lt;dbl&gt; &lt;fct&gt;   &lt;dbl&gt;
 1     0 MA     44838.
 2     0 BA     42278.
 3     1 MA     45656.
 4     1 BA     43096.
 5     2 MA     46474.
 6     2 BA     43914.
 7     3 MA     47292.
 8     3 BA     44732.
 9     4 MA     48110.
10     4 BA     45550.
# ℹ 66 more rows</code></pre>
</div>
</div>
</section>
<section id="section-17" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Let’s see an example</p>
</div>
<h3 id="degree-and-experience-affects-salary-2">Degree and Experience affects Salary</h3>
<p>Visualize</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="fu">ggplot</span>(teacher_sample, <span class="fu">aes</span>(years, base, <span class="at">colour =</span> degree)) <span class="sc">+</span></span>
<span id="cb28-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb28-3"><a href=""></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> grid, <span class="fu">aes</span>(<span class="at">y =</span> pred)) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="unit4_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section id="section-18" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Inference</p>
</div>
</section>
<section id="inference-introduction" class="slide level2">
<h2>Inference: Introduction</h2>
<div style="font-size:30px">
<p>We need to understand some concepts first…</p>
<ul>
<li><strong>Population</strong>: Group of elements to study</li>
<li><strong>Parameter</strong>: Numeric amount originated from the population, normally unknown.</li>
</ul>
<p>If we have data about each element of the <strong>population</strong> we could calculate the population <strong>parameter</strong>.</p>
<p>But this is not possible in most of the cases. For this reason we work with…</p>
<ul>
<li><strong>Sample</strong>: A subset of our population of interest.</li>
<li><strong>Statistic</strong>: Numeric amount originated from the sample.</li>
</ul>
<p>If the <strong>sample</strong> represents correctly the population we could use probability and statistical inference to obtain conclusions applicable to the whole population.</p>
</div>
</section>
<section id="statistical-inference" class="slide level2">
<h2>Statistical Inference</h2>
<p><strong>Statistical Inference</strong> is the process that allows, through data, obtain conclusions and apply them to the whole population where the sample was originated.</p>
<ul>
<li><p><strong>Estimation</strong>, use the sample to estimate a possible interval of values for a given population parameter unknown.</p></li>
<li><p><strong>Hypothesis Contrast</strong>, evaluate if the given sample shows an evidence of the application of a given affirmation about the population.</p></li>
</ul>
<p>We will work with <strong>estimation</strong> here.</p>
</section>
<section id="section-19" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Estimations</p>
</div>
</section>
<section id="section-20" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Estimations</p>
</div>
<h3 id="airbnb-in-valència">Airbnb in València</h3>
<p>How much we should expect to pay for an Airbnb in the city of València?</p>
</section>
<section id="section-21" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Estimations</p>
</div>
<h3 id="airbnb-in-valència-data">Airbnb in València: Data</h3>
<div style="font-size:30px">
<p>We have obtained the data from València Airbnb prices thanks to <a href="https://insideairbnb.com/valencia/">Inside Airbnb</a> data repository that scrapped all listings from the website on the 22nd of June 2024.</p>
<p><strong>Population for the analysis:</strong> All airbnb’ houses/apartments with at least 10 reviews in València.</p>
<p><strong>Goal Paremeter:</strong> Average price per night in those airbnbs.</p>
<p>Which is the average price for an airbnb with at leat 8 reviews in the city of Valéncia at the month of June?</p>
<p>We are going to use a random sample data with 50 airbnb locations with the price per night value informed.</p>
</div>
</section>
<section id="point-estimation" class="slide level2">
<h2>Point Estimation</h2>
<p>A <strong>point estimator</strong> is a value computed from the sample to serve as the “best estimation” for the population parameter.</p>
<p>Our point estimator for the average price per night will be the average obtained from the sample:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../../data/vlc_listings_50.csv"</span>)</span>
<span id="cb29-2"><a href=""></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">mean_price =</span> <span class="fu">mean</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_price
       &lt;dbl&gt;
1       138.</code></pre>
</div>
</div>
</section>
<section id="point-estimation-1" class="slide level2">
<h2>Point Estimation</h2>
<p>Now we can see our point estimator and the sample represented with an histogram</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-24-1.png" width="960" class="r-stretch"></section>
<section id="point-estimation-2" class="slide level2">
<h2>Point Estimation</h2>
<p>Point estimators are useful when we are trying to find a general value to define a parameter, but they can be not representative and highly affected by the distribution of the sample values. We can provide a range of values where the parameter can be found.</p>
<ul>
<li><p>If we provide only a single value (point estimation), we can fail trying to find the exact parameter for the population.</p></li>
<li><p>If we provide a range of values, we have more probabilities of having the paremter inside the range of values we found.</p></li>
</ul>
</section>
<section id="section-22" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Confidence Intervals</p>
</div>
</section>
<section id="confidence-intervals" class="slide level2">
<h2>Confidence Intervals</h2>
<p>For building a confidence interval for the population parameter, we need to create a rank of possible values around the observed sample’s average.</p>
<p>It is important to note that the random samples, will be different between them. This means if we take a another random sample of more 50 listings about AirBnb in València, it is possible not to obtain the same price average.</p>
<p><strong>There is a variability in the sample average.</strong></p>
<p>For building a confidence interval, we need to measure this variability. This will give us on how much we can expect our sample average to variate from each sample.</p>
</section>
<section id="section-23" class="slide level2">
<h2></h2>
<div style="margin-top: 10px;">
<p>Confidence Intervals</p>
</div>
<h3 id="some-examples-of-the-importance-of-variability">Some examples of the importance of variability</h3>
<p>Ex 1: We divide the class in two groups and we ask each student their height. Then we compute the average height for each group. Will you expect them to be the same, similar or different?</p>
<p>Ex 2: We take 50 students randomly and looks 5 of them write with the left hand. If you take another random sample of 50 students. How many of them will you expect to be left-handed? Will you be surprised if only 3 of them are left-handed? And if they were 40 this time?</p>
</section>
<section id="how-to-measure-variability" class="slide level2">
<h2>How to measure variability?</h2>
<p>We can measure variability of the sample values with different approaches:</p>
<ul>
<li><p><strong>Simulation</strong>: we can use re-sampling techniques or “bootstrap” to find different values for the same metric.</p></li>
<li><p><strong>Theory</strong>: using the Central Limit Theorem (Normal Distribution)</p></li>
</ul>
</section>
<section id="section-24" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Bootstrapping</p>
</div>
</section>
<section id="bootstrap-principle" class="slide level2">
<h2>Bootstrap Principle</h2>
<p><strong>Bootstrap</strong> is a re-sample technique used for measuring the variance of an estimation.</p>
<p>We will use it for estimating the population parameter using only the given sample.</p>
<p>It uses the same principles of the statistical inference so it is considered an alternative.</p>

<img data-src="img/Illustration_bootstrap.png" style="margin-left:160px" class="r-stretch"></section>
<section id="bootstrap-procedure" class="slide level2">
<h2>Bootstrap Procedure</h2>
<ol type="1">
<li><p>Take a <strong>bootstrap sample</strong>, a random sample <strong>with replacement</strong> from the original sample, <strong>with the same size</strong> of the original sample.</p></li>
<li><p>Compute the <strong>bootstrap statistic</strong>: the statistic we want to compute (average, median, correlation, …) using the bootstrap sample.</p></li>
<li><p>Repeat steps 1 and 2 multiple times to create a <strong>bootstrap distribution</strong> - a distribution of bootstrap statistics.</p></li>
<li><p>Compute the confidence interval limits of XX% as the region that has the XX% of the bootstrap distribution.</p></li>
</ol>
</section>
<section id="step-by-step" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 1.</strong> Take a <strong>bootstrap sample</strong>, a random sample <strong>with replacement</strong> from the original sample, <strong>with the same size</strong> of the original sample.</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-26-1.png" width="960" class="r-stretch"></section>
<section id="step-by-step-1" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 2.</strong> Compute the <strong>bootstrap statistic</strong>: the statistic we want to compute (the average price in this case) using the bootstrap sample.</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-27-1.png" width="960" class="r-stretch"></section>
<section id="step-by-step-2" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 3.</strong> Repeat steps 1 and 2 multiple times to create a <strong>bootstrap distribution</strong></p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-32-1.png" width="960" class="r-stretch"></section>
<section id="step-by-step-3" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 3.</strong> In this case we have make 500 bootstrap re-samples and then compute the average for each one. What we do finally is represent all the averages in an histogram plot:</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-33-1.png" style="width:70.0%" class="r-stretch"></section>
<section id="step-by-step-4" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 3.</strong> Here we can compare the original sample and the distribution of bootstrap means.</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"></section>
<section id="step-by-step-5" class="slide level2">
<h2>Step by step</h2>
<p><strong>Step 4.</strong> Compute the limits of the bootstrap interval using the percentiles of the bootstrap distribution.</p>
<div class="layout-sidebar layout-sidebar-left">
<div class="cell panel-sidebar">
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="1033" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1032;"><span id="cb31-1033"><a href=""></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span>
<span id="cb31-1034"><a href=""></a></span>
<span id="cb31-1035"><a href=""></a>viewof confidence <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb31-1036"><a href=""></a>  [<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]<span class="op">,</span> </span>
<span id="cb31-1037"><a href=""></a>  {<span class="dt">value</span><span class="op">:</span> <span class="dv">95</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Confidence%:"</span>}</span>
<span id="cb31-1038"><a href=""></a>)</span>
<span id="cb31-1039"><a href=""></a></span>
<span id="cb31-1040"><a href=""></a>lowerBound <span class="op">=</span> d3<span class="op">.</span><span class="fu">quantile</span>(boot_plot<span class="op">.</span><span class="at">boot_mean</span><span class="op">,</span>(<span class="dv">1</span><span class="op">-</span>confidence<span class="op">/</span><span class="dv">100</span>)<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb31-1041"><a href=""></a></span>
<span id="cb31-1042"><a href=""></a>upperBound <span class="op">=</span> d3<span class="op">.</span><span class="fu">quantile</span>(boot_plot<span class="op">.</span><span class="at">boot_mean</span><span class="op">,</span>confidence<span class="op">/</span><span class="dv">100</span><span class="op">+</span>(<span class="dv">1</span><span class="op">-</span>confidence<span class="op">/</span><span class="dv">100</span>)<span class="op">/</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell panel-fill">
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="1049" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1048;"><span id="cb32-1049"><a href=""></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb32-1050"><a href=""></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb32-1051"><a href=""></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb32-1052"><a href=""></a>  }<span class="op">,</span></span>
<span id="cb32-1053"><a href=""></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb32-1054"><a href=""></a>    Plot<span class="op">.</span><span class="fu">rectY</span>(</span>
<span id="cb32-1055"><a href=""></a>      boot_plot<span class="op">.</span><span class="at">boot_mean</span><span class="op">,</span></span>
<span id="cb32-1056"><a href=""></a>      Plot<span class="op">.</span><span class="fu">binX</span>(</span>
<span id="cb32-1057"><a href=""></a>        { </span>
<span id="cb32-1058"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"count"</span></span>
<span id="cb32-1059"><a href=""></a>        }<span class="op">,</span>{</span>
<span id="cb32-1060"><a href=""></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ffdad8"</span><span class="op">,</span></span>
<span id="cb32-1061"><a href=""></a>        </span>
<span id="cb32-1062"><a href=""></a>        }</span>
<span id="cb32-1063"><a href=""></a>      )</span>
<span id="cb32-1064"><a href=""></a>    )<span class="op">,</span></span>
<span id="cb32-1065"><a href=""></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([lowerBound])<span class="op">,</span></span>
<span id="cb32-1066"><a href=""></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([upperBound])</span>
<span id="cb32-1067"><a href=""></a>  ]</span>
<span id="cb32-1068"><a href=""></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</section>
<section id="section-25" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="margin-top: 200px; font-size: 3em;">
<p>Bootstrapping in R with infer package</p>
</div>
</section>
<section id="infer-package" class="slide level2">
<h2><code>infer</code> package</h2>
<div class="columns">
<div class="column">
<p><img data-src="img/infer.png"></p>
</div><div class="column">
<p>Infer package help us do an inferential analysis like bootstraping but using the tidyverse ecosystem sintax.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="fu">library</span>(infer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="choose-a-seed" class="slide level2">
<h2>Choose a seed</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When doing analysis, simulations and sampling techniques it is recommended to make them replicable.</p>
<p><code>set.seed()</code> is an R base function that help us establish a common starting point on your machine, helping you control simulations and making them replicable.</p>
<p>This means that if use the same seed, you will guarantee that each time you run your code you will get the same results.</p>
</section>
<section id="generate-bootstrap-averages" class="slide level2">
<h2>Generate Bootstrap averages</h2>
<h3 id="specify"><code>specify()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" data-code-line-numbers="2,3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href=""></a>  <span class="co"># specifiy the variable of interest</span></span>
<span id="cb35-3"><a href=""></a>  <span class="fu">specify</span>(<span class="at">response =</span> price)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With <code>specify()</code>, we will tell infer which is the variable we will use to make the re-sampling, our objective variable to obtain the bootstrap mean.</p>
</section>
<section id="generate-bootstrap-averages-1" class="slide level2">
<h2>Generate Bootstrap averages</h2>
<h3 id="generate"><code>generate()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" data-code-line-numbers="4,5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href=""></a>  <span class="co"># specifiy the variable of interest</span></span>
<span id="cb36-3"><a href=""></a>  <span class="fu">specify</span>(<span class="at">response =</span> price) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href=""></a>  <span class="co"># generate 15000 bootstrap samples</span></span>
<span id="cb36-5"><a href=""></a>  <span class="fu">generate</span>(<span class="at">reps =</span> <span class="dv">1500</span>, <span class="at">type =</span> <span class="st">"bootstrap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With <code>generate()</code>, we will tell infer which is the number of re-samplings we want to do, and the technique we want to use. In this case Bootstrap re-sampling.</p>
</section>
<section id="generate-bootstrap-averages-2" class="slide level2">
<h2>Generate Bootstrap averages</h2>
<h3 id="calculate"><code>calculate()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" data-code-line-numbers="6,7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href=""></a>  <span class="co"># specifiy the variable of interest</span></span>
<span id="cb37-3"><a href=""></a>  <span class="fu">specify</span>(<span class="at">response =</span> price) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href=""></a>  <span class="co"># generate 15000 bootstrap samples</span></span>
<span id="cb37-5"><a href=""></a>  <span class="fu">generate</span>(<span class="at">reps =</span> <span class="dv">1500</span>, <span class="at">type =</span> <span class="st">"bootstrap"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href=""></a>    <span class="co"># calculate the statistic of each bootstrap sample</span></span>
<span id="cb37-7"><a href=""></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With <code>calculate()</code>, we will tell infer which is the metric we want to compute for each sample, so we can get the metric distribution. In this case we choose the mean, but we can select other kind of metrics, like the median for example.</p>
</section>
<section id="full-example" class="slide level2">
<h2>Full Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a>num_reps <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb38-2"><a href=""></a></span>
<span id="cb38-3"><a href=""></a><span class="co"># save resulting bootstrap distribution</span></span>
<span id="cb38-4"><a href=""></a>boot_dist <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href=""></a>  <span class="co"># specify the variable of interest</span></span>
<span id="cb38-6"><a href=""></a>  <span class="fu">specify</span>(<span class="at">response =</span> price) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href=""></a>  <span class="co"># generate 100 bootstrap samples</span></span>
<span id="cb38-8"><a href=""></a>  <span class="fu">generate</span>(<span class="at">reps =</span> num_reps, <span class="at">type =</span> <span class="st">"bootstrap"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-9"><a href=""></a>  <span class="co"># calculate the statistic of each bootstrap sample</span></span>
<span id="cb38-10"><a href=""></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">"mean"</span>)</span>
<span id="cb38-11"><a href=""></a></span>
<span id="cb38-12"><a href=""></a>boot_dist <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 100
Columns: 2
$ replicate &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…
$ stat      &lt;dbl&gt; 141.78, 137.74, 126.60, 142.64, 142.86, 132.52, 144.26, 148.…</code></pre>
</div>
</div>
</section>
<section id="visualize-the-distribution" class="slide level2">
<h2>Visualize the distribution</h2>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-45-1.png" width="960" class="r-stretch"></section>
<section id="computing-confidence-intervals" class="slide level2">
<h2>Computing Confidence Intervals</h2>
<div style="font-size:30px">
<p>A confidence interval of 95% means that it contains the 95% central possible values of the bootstrap distribution. For obtaining this 95%, we need to exclude the other 5% of the sample.</p>
<p>As it is a 95% central, means that we need to exclude 2.5% of each side (5% / 2) of the distribution.</p>
<p><img data-src="img/Interval_Diagram.png" style="width: 750px; margin-left: 125px;"></p>
</div>
</section>
<section id="computing-confidence-intervals-1" class="slide level2">
<h2>Computing Confidence Intervals</h2>
<p>For making this computation with <strong>dplyr</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a>ci <span class="ot">&lt;-</span> boot_dist <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">lower_b =</span> <span class="fu">quantile</span>(stat, <span class="fl">0.025</span>), </span>
<span id="cb40-3"><a href=""></a>            <span class="at">upper_b =</span> <span class="fu">quantile</span>(stat, <span class="fl">0.975</span>))</span>
<span id="cb40-4"><a href=""></a>ci</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  lower_b upper_b
    &lt;dbl&gt;   &lt;dbl&gt;
1    122.    158.</code></pre>
</div>
</div>
</section>
<section id="visualizing-confidence-intervals" class="slide level2">
<h2>Visualizing Confidence Intervals</h2>
<h3 id="option-1">Option 1</h3>
<p>Using ggplot geometric <code>geom_vline()</code> to mark the limits of the interval:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42" data-code-line-numbers="1,3,4,5,6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> boot_dist, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> stat)) <span class="sc">+</span></span>
<span id="cb42-2"><a href=""></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb42-3"><a href=""></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> ci<span class="sc">$</span>lower_b,</span>
<span id="cb42-4"><a href=""></a>             <span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb42-5"><a href=""></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> ci<span class="sc">$</span>upper_b,</span>
<span id="cb42-6"><a href=""></a>             <span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb42-7"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bootstrap distribution of the average price."</span>,</span>
<span id="cb42-8"><a href=""></a>       <span class="at">subtitle =</span> <span class="st">"with CI of 95%"</span>,</span>
<span id="cb42-9"><a href=""></a>       <span class="at">x =</span> <span class="st">"Averages"</span>, <span class="at">y =</span> <span class="st">"Number"</span>) <span class="sc">+</span></span>
<span id="cb42-10"><a href=""></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizing-confidence-intervals-1" class="slide level2">
<h2>Visualizing Confidence Intervals</h2>
<h3 id="option-1-1">Option 1</h3>
<p>Using ggplot geometric <code>geom_vline()</code> to mark the limits of the interval:</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-48-1.png" width="960" class="r-stretch"></section>
<section id="visualizing-confidence-intervals-2" class="slide level2">
<h2>Visualizing Confidence Intervals</h2>
<h3 id="option-2">Option 2</h3>
<p>Using <code>visualize</code> function together with <code>shade_confidence_interval</code> that prints the intervals passed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43" data-code-line-numbers="1,2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">visualize</span>(boot_dist) <span class="sc">+</span></span>
<span id="cb43-2"><a href=""></a>  <span class="fu">shade_confidence_interval</span>(<span class="at">endpoints =</span> ci)<span class="sc">+</span></span>
<span id="cb43-3"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bootstrap distribution of the average price."</span>,</span>
<span id="cb43-4"><a href=""></a>       <span class="at">subtitle =</span> <span class="st">"with CI of 95%"</span>,</span>
<span id="cb43-5"><a href=""></a>       <span class="at">x =</span> <span class="st">"Averages"</span>, <span class="at">y =</span> <span class="st">"Number"</span>) <span class="sc">+</span></span>
<span id="cb43-6"><a href=""></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizing-confidence-intervals-3" class="slide level2">
<h2>Visualizing Confidence Intervals</h2>
<h3 id="option-2-1">Option 2</h3>
<p>Using <code>visualize</code> function together with <code>shade_confidence_interval</code> that prints the intervals passed.</p>

<img data-src="unit4_files/figure-revealjs/unnamed-chunk-50-1.png" width="960" class="r-stretch"></section>
<section id="interpreting-the-confidence-interval" class="slide level2">
<h2>Interpreting the Confidence Interval</h2>
<p>Our Confidence Interval of 95% is [122, 158].</p>
<div style="font-size: 50px">
<hr>
<p><strong>This means that exists a 95% of probability that the average price of the apartments is inside the interval [122, 158]?</strong></p>
<hr>
</div>
</section>
<section id="interpreting-the-confidence-interval-1" class="slide level2">
<h2>Interpreting the Confidence Interval</h2>
<div style="font-size: 30px">
<hr>
<p><del><strong>This means that exists a 95% of probability that the average price of the apartments is inside the interval [122, 158]?</strong></del></p>
<hr>
<p><img data-src="img/no_gif.gif" class="absolute" style="top: 200px; left: 30px; width: 400px; height: 250px; "></p>
<p><img data-src="img/theoffice_NO.gif" class="absolute" style="top: 200px; right: 80px; width: 450px; "></p>
<p><img data-src="img/no.gif" class="absolute" style="left: 195px; bottom: 22px; width: 235px; "></p>
</div>
</section>
<section id="interpreting-the-confidence-interval-2" class="slide level2">
<h2>Interpreting the Confidence Interval</h2>
<div style="font-size: 30px">
<ul>
<li><p>The population parameter can be or not in our interval. There is no a “probability of 95%” for it to be in an specific interval.</p></li>
<li><p>Bootstrap distribution computes the variance of the parameter based on sample of the population. And the idea that the origin data comes from a sample, means that if if we change the sample the interval with a confidence of 95% can change.</p></li>
<li><p>All that we can say, is that *if we take independent samples of the population and compute a 95% CI for the average for each one, we expect that the 95% of these intervals to contain the population average.</p></li>
<li><p>But we are not sure enough that the population parameter is inside the interval.</p></li>
</ul>
<table class="caption-top">
<tbody>
<tr class="odd">
<td><strong>We have a 95% confidence that the average price of an apartment in València for June is between 122 and 158 euros.</strong></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="section-26" class="slide level2">
<h2></h2>
<p><img data-src="img/final.gif" width="1000"></p>
<div class="quarto-auto-generated-content">
<p><img src="img/logo2.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Modelling</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="unit4_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="unit4_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="unit4_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="unit4_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImQzID0gcmVxdWlyZShcImQzQDdcIilcblxudmlld29mIGNvbmZpZGVuY2UgPSBJbnB1dHMucmFuZ2UoXG4gIFswLCAxMDBdLCBcbiAge3ZhbHVlOiA5NSwgc3RlcDogMSwgbGFiZWw6IFwiQ29uZmlkZW5jZSU6XCJ9XG4pXG5cbmxvd2VyQm91bmQgPSBkMy5xdWFudGlsZShib290X3Bsb3QuYm9vdF9tZWFuLCgxLWNvbmZpZGVuY2UvMTAwKS8yKVxuXG51cHBlckJvdW5kID0gZDMucXVhbnRpbGUoYm9vdF9wbG90LmJvb3RfbWVhbixjb25maWRlbmNlLzEwMCsoMS1jb25maWRlbmNlLzEwMCkvMilcblxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG5QbG90LnBsb3Qoe1xuICB5OiB7XG4gICAgZ3JpZDogdHJ1ZVxuICB9LFxuICBtYXJrczogW1xuICAgIFBsb3QucmVjdFkoXG4gICAgICBib290X3Bsb3QuYm9vdF9tZWFuLFxuICAgICAgUGxvdC5iaW5YKFxuICAgICAgICB7IFxuICAgICAgICAgIHk6IFwiY291bnRcIlxuICAgICAgICB9LHtcbiAgICAgICAgZmlsbDogXCIjZmZkYWQ4XCIsXG4gICAgICAgIFxuICAgICAgICB9XG4gICAgICApXG4gICAgKSxcbiAgICAgIFBsb3QucnVsZVgoW2xvd2VyQm91bmRdKSxcbiAgICAgIFBsb3QucnVsZVgoW3VwcGVyQm91bmRdKVxuICBdXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdjb25maWRlbmNlJykifV19
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../../..";
    window._ojs.paths.runtimeToRoot = "../../..";
    window._ojs.paths.docToRoot = "";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>